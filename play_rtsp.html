
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title data-lang="liveVideo"></title>
        <script type="text/javascript" src="https://flashphoner.com/downloads/builds/flashphoner_client/wcs_api-2.0/current/flashphoner.js"></script>

    </head>

    <body>
       <style>
        .fp-Video {
            border: 1px double black;
            width: 322px;
            height: 242px;
        }
        .display {
            width: 100%;
            height: 100%;
            display: inline-block;
        }
        .display > video,
        object {
            width: 100%;
            height: 100%;
        }
</style>


       <body onload="init_api()">
        <div class="fp-Video">
            <div id="play" class="display"></div>
        </div>
        <br />


        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script type="text/javascript">
            
            
            
            jQuery(document).ready(function($) {
                var getUrlParameter = function getUrlParameter(sParam) {
                    // Get custom URL from HTML parameter
                    var sPageURL = window.location.search.substring(1),
                        sURLVariables = sPageURL.split('&'),
                        sParameterName,
                        i;

                    for (i = 0; i < sURLVariables.length; i++) {
                        sParameterName = sURLVariables[i].split('=');

                        if (sParameterName[0] === sParam) {
                            return typeof sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                        }
                    }
                    return false;
                };
                // Add the stream URL to player
                  
                
                  load(getUrlParameter('stream'));


            }); // jQuery(function($) END
    

            function load(url) {
                
              
                
                var video_url = url;
                
                //Status constants
            var SESSION_STATUS = Flashphoner.constants.SESSION_STATUS;
            var STREAM_STATUS = Flashphoner.constants.STREAM_STATUS;
            var session;
            var PRELOADER_URL = "https://github.com/flashphoner/flashphoner_client/raw/wcs_api-2.0/examples/demo/dependencies/media/preloader.mp4";

            //Init Flashphoner API on page load

                Flashphoner.init({});
                //Connect to WCS server over websockets
                session = Flashphoner.createSession({
                    urlServer: "wss://demo.flashphoner.com" //specify the address of your WCS
                }).on(SESSION_STATUS.ESTABLISHED, function(session) {
                    console.log("ESTABLISHED");
                });

                session.createStream({
                    name: video_url, //specify the RTSP stream address
                    display: document.getElementById("play"),
                }).play();
            }

        

        </script>
    
    </body>
</html>
